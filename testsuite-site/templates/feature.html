{% extends 'base.html' %}
{% load assignments %}
{% load filters %}

{% block content %}

<h1>{{feature.name}}</h1>

{% if tests|length < 2 %}
<p>The {{feature.name}} feature contains {{tests | length}} test.</p>
{% else %}
<p>The {{feature.name}} feature contains {{tests | length}} tests.</p>
{% endif %}

<table id="feature" class="table table-feature">
    <thead>
        <th class="rs">Reading System</th>
        <th class="pass">Tests Passed</th>
        {% for test in tests %}
        <th>{{test.name}}</th>
        {% endfor %}
    </thead>
    <tbody>
        {% for evaluation in evaluations %}
        <tr>
            <th class="rs"><a href="/grid/{{evaluation.reading_system_version.reading_system.id}}/testsuite/{{evaluation.testsuite.testsuite_id}}">{{evaluation.reading_system.name}} {{evaluation.reading_system.version}} ({{evaluation.reading_system.operating_system}})</a>
            <br/>
            {% get_metadata evaluation as metadata %}
            {% if metadata != None %}
            <span>{{metadata.assistive_technology}}</span>
            {% endif %}
            </th>
            {% get_score evaluation feature as feature_score %}
            <td class="pass">{{feature_score.fraction}}</td>
            {% for test in tests %}
            {% get_result test evaluation as result %}
            {% if result.result == "1" %}
            <td class="supported">
            {% elif result.result == "2" %}
            <td class="unsupported">
            {% else %}
            <td class="other">
            {% endif %}
                 {{result | get_result_description}}
            </td>
            {% endfor %}
        </tr>
        {% endfor %}
    </tbody>
</table>

<script>
    $(document).ready(function(){
        $('#feature').DataTable({
            "paging":   false,
            "info": false,
            "autoWidth": false,
            "scrollY":        "75vh",
            "scrollX":        true,
            "scrollCollapse": false,
            "fixedColumns": {
                "leftColumns": 1
            },
            "oLanguage": {
                "sSearch": "Find Reading System: "
            }
        });
    });
</script>

{% endblock %}
